---
import DefaultLayout from "../layouts/DefaultLayout.astro";
import Hero from "../components/Hero.astro";
import { getCollection } from "astro:content";

import Grid from "../components/Grid.astro";
import PortfolioPreview from "../components/PortfolioPreview.astro";

import Skills from "../components/Skills.astro";
import Footer from "../components/Footer.astro";

const projects = (await getCollection("work")).sort(
  (a, b) => b.data.sort - a.data.sort
);
---

<DefaultLayout title="passbox">
  <div class="stack gap-20 lg:gap-48">
    <div class="wrapper stack gap-8 lg:gap-20">
      <header class="hero">
        <Hero />
      </header>

      <Skills />
    </div>

    <main class="wrapper stack gap-20 lg:gap-48">
      <section class="section with-background with-cta">
        <div class="gallery">
          <Grid variant="offset">
            {
              projects.map((project) => (
                <li>
                  <PortfolioPreview project={project} />
                </li>
              ))
            }
          </Grid>
        </div>
      </section>
      <Footer />
    </main>
  </div>
</DefaultLayout>

<style>
  main {
    margin: auto;
    padding: 1.5rem;
    max-width: 90ch;
  }
  .link-card-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(24ch, 1fr));
    gap: 1rem;
    padding: 0;
  }
  .text-primary {
    color: #9333ea;
  }
</style>
